![Aetheric Banner](https://github.com/aetheric-oss/.github/raw/main/assets/doc-banner.png)

# Interface Control Document (ICD) - `svc-scheduler`

## :telescope: Overview

This document defines the gRPC interface unique to the `svc-scheduler` microservice.

### Metadata

| Attribute     | Description                                                       |
| ------------- |-------------------------------------------------------------------|
| Maintainer(s) | [Aetheric Realm Team](https://github.com/orgs/aetheric-oss/teams/dev-realm) |
| Stuckee       | A.M. Smith ([@ServiceDog](https://github.com/servicedog))         |
| Status        | Development                                                       |

## :books: Related Documents

Document | Description
--- | ---
[High-Level Concept of Operations (CONOPS)](https://github.com/aetheric-oss/se-services/blob/develop/docs/conops.md) | Overview of Aetheric microservices.
[High-Level Interface Control Document (ICD)](https://github.com/aetheric-oss/se-services/blob/develop/docs/icd.md)  | Interfaces and frameworks common to all Aetheric microservices.
[Requirements - `svc-scheduler`](https://nocodb.aetheric.nl/dashboard/#/nc/view/bdffd78a-75bf-40b0-a45d-948cbee2241c) | Requirements and user stories for this microservice.
[Concept of Operations - `svc-scheduler`](./conops.md) | Defines the motivation and duties of this microservice.
[Interface Control Document (ICD) - `svc-scheduler`](./icd.md) | Defines the inputs and outputs of this microservice.
[Software Design Document (SDD) - `svc-scheduler`](./sdd.md) | Specifies the internal activity of this microservice.
[Routing Scenarios](https://docs.google.com/presentation/d/1Nt91KVIczhxngurfyeIJtG8J0m_38jGU1Cnqm1_BfPc/edit#slide=id.g1454d6dfbcf_0_731) | Graphical representation of various routing scenarios

## :hammer: Frameworks

See [High-Level Services ICD](https://github.com/aetheric-oss/se-services/blob/develop/docs/icd.md).

## :speech_balloon: gRPC

### Files

[grpc.proto](../proto/grpc.proto) | Common gRPC interfaces, protocol buffer file.
[grpc.rs](../client-grpc/src/grpc.rs) | Autogenerated rust client and types

### Integrated Authentication & Encryption

See [High-Level Services ICD](https://github.com/aetheric-oss/se-services/blob/develop/docs/icd.md).

### gRPC Server Methods ("Services")

| Service | Arguments | Description |
| --- | --- | --- |
| `is_ready` | (empty) | Returns `true` if server is up and running. |
| `create_itinerary` | TODO | Takes a proposal for an itinerary and creates it if possible. Returns a task ID immediately. |
| `cancel_itinerary` | `string`Â id | Takes `id` (UUID) of an itinerary and cancels it. Returns a task ID immediately. |
| `cancel_task` |  `uint32` task_id | Cancels a queued task before it can be acted on, if still queued. |
| `get_task_status` | `uint32` task_id | Requests the current status of a scheduler task. |
| `query_flight` | `bool` isCargo<br/>`uint32` persons<br/>`uint32` weight_grams<br/>`Timestamp` earliest departure time<br/>`Timestamp` latest arrival time<br/>`string` origin_vertiport_id<br/>`string` target_vertiport_id<br/> | Takes requested departure and arrival vertiport UUIDs and a time window for the itinerary to occur and returns a number of possible itineraries. |
